{"remainingRequest":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\src\\router\\index.js","dependencies":[{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\src\\router\\index.js","mtime":1585207882762},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\\\u54C1\\u8FBE\\u901A\\u7528\\u6743\\u9650\\u7CFB\\u7EDF\\\\\\u8D44\\u6599\\\\\\u524D\\u7AEF\\u5DE5\\u7A0B\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"D:\\\\\\u54C1\\u8FBE\\u901A\\u7528\\u6743\\u9650\\u7CFB\\u7EDF\\\\\\u8D44\\u6599\\\\\\u524D\\u7AEF\\u5DE5\\u7A0B\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/objectSpread2\"));\n\nvar _interopRequireWildcard2 = _interopRequireDefault(require(\"D:\\\\\\u54C1\\u8FBE\\u901A\\u7528\\u6743\\u9650\\u7CFB\\u7EDF\\\\\\u8D44\\u6599\\\\\\u524D\\u7AEF\\u5DE5\\u7A0B\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/interopRequireWildcard\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _vueRouter = _interopRequireDefault(require(\"vue-router\"));\n\nvar _layout = _interopRequireDefault(require(\"@/layout\"));\n\nvar _localstorage = _interopRequireDefault(require(\"@/utils/localstorage\"));\n\nvar _index = _interopRequireDefault(require(\"@/store/index\"));\n\nvar _Login = _interopRequireDefault(require(\"@/api/Login.js\"));\n\nvar _nprogress = _interopRequireDefault(require(\"nprogress\"));\n\nrequire(\"nprogress/nprogress.css\");\n\n_vue.default.use(_vueRouter.default);\n\nvar constRouter = [{\n  path: '/redirect',\n  component: _layout.default,\n  redirect: '/redirect',\n  hidden: true,\n  children: [{\n    path: '/redirect/:path*',\n    component: function component() {\n      return Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/views/redirect/index'));\n      });\n    }\n  }]\n}, {\n  path: '/404',\n  component: function component() {\n    return Promise.resolve().then(function () {\n      return (0, _interopRequireWildcard2.default)(require('@/views/error-page/404'));\n    });\n  },\n  hidden: true\n}, {\n  path: '/login',\n  name: '登录页',\n  component: function component() {\n    return Promise.resolve().then(function () {\n      return (0, _interopRequireWildcard2.default)(require('@/views/login/index'));\n    });\n  }\n}, {\n  path: '/',\n  component: _layout.default,\n  redirect: '/dashboard',\n  children: [{\n    path: 'dashboard',\n    component: function component() {\n      return Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/views/dashboard/index'));\n      });\n    },\n    name: 'Dashboard',\n    meta: {\n      title: 'dashboard',\n      icon: 'dashboard',\n      affix: true\n    }\n  }]\n}, {\n  path: '/profile',\n  component: _layout.default,\n  redirect: '/profile/index',\n  hidden: true,\n  children: [{\n    path: 'index',\n    component: function component() {\n      return Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/views/profile/index'));\n      });\n    },\n    name: 'Profile',\n    meta: {\n      title: 'profile',\n      icon: 'user',\n      noCache: true\n    }\n  }, {\n    hidden: true,\n    path: '/sms/manage/edit',\n    component: function component() {\n      return Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/views/pinda/sms/manage/Edit'));\n      });\n    },\n    name: 'smsEdit',\n    meta: {\n      title: '发送短信',\n      icon: '',\n      noCache: true\n    }\n  }]\n}, {\n  path: '/error',\n  component: _layout.default,\n  redirect: 'noRedirect',\n  name: 'ErrorPages',\n  meta: {\n    title: 'errorPages',\n    icon: '404'\n  },\n  children: [{\n    path: '404',\n    component: function component() {\n      return Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/views/error-page/404'));\n      });\n    },\n    name: 'Page404',\n    meta: {\n      title: 'page404',\n      noCache: true\n    }\n  }]\n}, {\n  path: '/myiframe',\n  component: _layout.default,\n  redirect: '/myiframe',\n  children: [{\n    path: \":routerPath\",\n    name: 'iframe',\n    component: function component() {\n      return Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/views/iframe/index'));\n      });\n    },\n    props: true\n  }]\n}];\nvar router = new _vueRouter.default({\n  scrollBehavior: function scrollBehavior() {\n    return {\n      y: 0\n    };\n  },\n  routes: constRouter\n});\nvar whiteList = ['/login'];\nvar asyncRouter; // 导航守卫，渲染动态路由\n\nrouter.beforeEach(function (to, from, next) {\n  _nprogress.default.start();\n\n  if (whiteList.indexOf(to.path) !== -1) {\n    next();\n  } else {\n    var token = _localstorage.default.get('TOKEN');\n\n    var user = _localstorage.default.get('USER');\n\n    var userRouter = get('USER_ROUTER');\n\n    if (token.length && user) {\n      if (!asyncRouter) {\n        if (!userRouter) {\n          _Login.default.getRouter({}).then(function (response) {\n            var res = response.data;\n            asyncRouter = res.data;\n\n            _index.default.commit('account/setRoutes', asyncRouter);\n\n            save('USER_ROUTER', asyncRouter);\n            go(to, next);\n          });\n        } else {\n          asyncRouter = userRouter;\n          go(to, next);\n        }\n      } else {\n        next();\n      }\n    } else {\n      if (to.path === '/login') {\n        next();\n      } else {\n        next('/login');\n      }\n    }\n  }\n});\nrouter.afterEach(function () {\n  _nprogress.default.done();\n});\n\nfunction go(to, next) {\n  asyncRouter = filterAsyncRouter(asyncRouter);\n  router.addRoutes(asyncRouter);\n  next((0, _objectSpread2.default)({}, to, {\n    replace: true\n  }));\n}\n\nfunction save(name, data) {\n  localStorage.setItem(name, JSON.stringify(data));\n}\n\nfunction get(name) {\n  return JSON.parse(localStorage.getItem(name));\n}\n\nfunction filterAsyncRouter(routes) {\n  return routes.filter(function (route) {\n    var component = route.component;\n\n    if (component) {\n      if (route.component === 'Layout') {\n        route.component = _layout.default;\n      } else {\n        route.component = view(component);\n      }\n\n      if (route.children && route.children.length) {\n        route.children = filterAsyncRouter(route.children);\n      }\n\n      return true;\n    }\n  });\n}\n\nfunction view(path) {\n  return function (resolve) {\n    Promise.resolve().then(function () {\n      return (0, _interopRequireWildcard2.default)(require(\"@/views/\".concat(path, \".vue\")));\n    }).then(function (mod) {\n      resolve(mod);\n    });\n  };\n}\n\nvar _default = router;\nexports.default = _default;",null]}