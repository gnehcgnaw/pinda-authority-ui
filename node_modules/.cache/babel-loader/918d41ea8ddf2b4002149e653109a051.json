{"remainingRequest":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\src\\views\\iframe\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\src\\views\\iframe\\index.vue","mtime":1585207882856},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\品达通用权限系统\\资料\\前端工程\\pinda-authority-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      src: '',\n      urlPath: this.getUrlPath() //iframe src 路径\n\n    };\n  },\n  computed: {},\n  watch: {\n    $route: function $route() {\n      this.load();\n    },\n    routerPath: function routerPath() {\n      // 监听routerPath变化，改变src路径\n      this.urlPath = this.getUrlPath();\n      alert(this.urlPath);\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.load();\n    this.resize();\n  },\n  methods: {\n    resize: function resize() {\n      var _this = this;\n\n      window.onresize = function () {\n        _this.iframeInit();\n      };\n    },\n    load: function load() {\n      var flag = true; //URL是否包含问号\n\n      if (this.$route.query.src !== undefined && this.$route.query.src.indexOf('?') === -1) {\n        flag = false;\n      }\n\n      var list = [];\n\n      for (var key in this.$route.query) {\n        if (key !== 'src' && key !== 'name' && key !== 'i18n') {\n          list.push(\"\".concat(key, \"= this.$route.query[key]\"));\n        }\n      }\n\n      list = list.join('&').toString();\n\n      if (flag) {\n        this.$route.query.src = \"\".concat(this.$route.query.src).concat(list.length > 0 ? \"&list\" : '');\n      } else {\n        this.$route.query.src = \"\".concat(this.$route.query.src).concat(list.length > 0 ? \"?list\" : '');\n      } //超时3s自动隐藏等待狂，加强用户体验\n\n\n      var time = 3;\n      var timeFunc = setInterval(function () {\n        time--;\n\n        if (time === 0) {\n          clearInterval(timeFunc);\n        }\n      }, 1000);\n      this.iframeInit();\n      this.src = this.getUrlPath();\n    },\n    iframeInit: function iframeInit() {\n      var iframe = this.$refs.iframe;\n      var clientHeight = document.documentElement.clientHeight - (screen > 1 ? 200 : 130);\n      if (!iframe) return;\n      iframe.style.height = \"\".concat(clientHeight, \"px\");\n\n      if (iframe.attachEvent) {\n        iframe.attachEvent('onload', function () {});\n      } else {\n        iframe.onload = function () {};\n      }\n    },\n    getUrlPath: function getUrlPath() {\n      console.log(this.$route); //获取 iframe src 路径\n\n      var url = decodeURIComponent(window.location.href);\n      var urlH = '';\n\n      if (window.location.port) {\n        urlH = window.location.protocol + '//' + window.location.host + '/#';\n      } else {\n        urlH = window.location.protocol + '//' + window.location.hostname + '/#';\n      }\n\n      url = url.replace(urlH + '/myiframe/iframe?urlPath&src=', '');\n      return url;\n    }\n  }\n};\nexports.default = _default;",null]}