{"remainingRequest":"D:\\projects\\beike\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\projects\\beike\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\projects\\beike\\pinda-authority-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\projects\\beike\\pinda-authority-ui\\src\\views\\dashboard\\index copy.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\projects\\beike\\pinda-authority-ui\\src\\views\\dashboard\\index copy.vue","mtime":1585207882807},{"path":"D:\\projects\\beike\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projects\\beike\\pinda-authority-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\projects\\beike\\pinda-authority-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projects\\beike\\pinda-authority-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\projects\\\\beike\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _createForOfIteratorHelper2 = _interopRequireDefault(require(\"D:\\\\projects\\\\beike\\\\pinda-authority-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createForOfIteratorHelper\"));\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.string.starts-with\");\n\nvar _echarts = _interopRequireDefault(require(\"echarts\"));\n\nvar _utils = require(\"@/utils\");\n\nvar _vueCountTo = _interopRequireDefault(require(\"vue-count-to\"));\n\nvar _resize = _interopRequireDefault(require(\"@/components/Charts/mixins/resize\"));\n\nvar _chartsOption = require(\"@/utils/chartsOption\");\n\nvar _Dashboard = _interopRequireDefault(require(\"@/api/Dashboard.js\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'Dashboard',\n  components: {\n    countTo: _vueCountTo.default\n  },\n  filters: {\n    userAvatarFilter: function userAvatarFilter(name) {\n      return name.charAt(0);\n    }\n  },\n  mixins: [_resize.default],\n  data: function data() {\n    return {\n      welcomeMessage: '',\n      todayIp: 0,\n      todayVisit: 0,\n      totalVisit: 0,\n      chart: null,\n      chartOption: (0, _chartsOption.simpleBar)(this.$t('common.visitTitle') + '\\n'),\n      browserCountOption: (0, _chartsOption.simplePie)('访问用户浏览器'),\n      operatingSystemCountOption: (0, _chartsOption.simplePie)('访问用户操作系统'),\n      browserCountChart: null,\n      operatingSystemCountChart: null,\n      projects: [{\n        name: 'SpringBoot',\n        des: 'Spring Boot 2.1.2',\n        avatar: 'SB'\n      }, {\n        name: 'SpringCloud',\n        des: 'Spring Cloud Greenwich.RELEASE',\n        avatar: 'SC'\n      }, {\n        name: 'Spring Cloud alibaba',\n        des: 'SpringCloudAlibaba2.1.0.RELEASE & nacos & seata & Sentinel',\n        avatar: 'SCA'\n      }, {\n        name: 'Mybatis-Plus',\n        des: 'Mybatis-plus 3.2.0：Mybatis 增强组件',\n        avatar: 'MP'\n      }, {\n        name: 'J2cache',\n        des: 'J2cache2.7.8: 二级缓存框架',\n        avatar: 'J'\n      }, {\n        name: '文件存储API',\n        des: '封装文件接口，实现本地存储、阿里云、FastDFS存储的配置化',\n        avatar: 'F'\n      }, {\n        name: '监控',\n        des: '集成SpringBootAdmin、Zipkin、Redis、Mysql、定时任务等监控，对系统进行全方位监控护航',\n        avatar: 'M'\n      }, {\n        name: '容器技术',\n        des: '虚拟化容器技术，让迁移、部署更加方便快捷',\n        avatar: 'C'\n      }]\n    };\n  },\n  computed: {\n    user: function user() {\n      return this.$store.state.account.user;\n    },\n    avatar: function avatar() {\n      if (!this.user['avatar']) {\n        return require(\"@/assets/avatar/default.jpg\");\n      } else {\n        if (this.user['avatar'].startsWith('http://') || this.user['avatar'].startsWith('https://')) {\n          return this.user['avatar'];\n        } else {\n          return require(\"@/assets/avatar/\".concat(this.user.avatar));\n        }\n      } // return this.$store.state.account.user.avatar\n\n    }\n  },\n  mounted: function mounted() {\n    this.welcomeMessage = this.welcome();\n    this.initIndexData();\n  },\n  methods: {\n    welcome: function welcome() {\n      var _this = this;\n\n      var date = new Date();\n      var hour = date.getHours();\n      var time = hour < 6 ? this.$t('common.goodMorning') : hour <= 11 ? this.$t('common.goodMorning') : hour <= 13 ? this.$t('common.goodAfternoon') : hour <= 18 ? this.$t('common.goodAfternoon') : this.$t('common.goodEvening');\n      var welcomeArr = Array.from({\n        length: 10\n      }, function (v, i) {\n        return _this.$t('common.randomMessage.' + i);\n      });\n      var index = Math.floor(Math.random() * welcomeArr.length);\n      return \"\".concat(time, \", \").concat(this.user.name, \", \").concat(welcomeArr[index]);\n    },\n    initIndexData: function initIndexData() {\n      var _this2 = this;\n\n      _Dashboard.default.getVisitList({}).then(function (response) {\n        var res = response.data;\n        var data = res.data;\n        _this2.todayIp = Number(data.todayIp);\n        _this2.totalVisit = Number(data.totalVisitCount);\n        _this2.todayVisit = Number(data.todayVisitCount);\n\n        _this2.tenDaysData(data);\n\n        _this2.browserCount(data.browserCount);\n\n        _this2.operatingSystemCount(data.operatingSystemCount);\n      });\n    },\n    tenDaysData: function tenDaysData(data) {\n      var tenVisitCount = [];\n      var dateArr = [];\n      var tenUserVisitCount = [];\n\n      for (var i = 9; i >= 0; i--) {\n        var time = (0, _utils.parseTime)(new Date(new Date().getTime() - 24 * 60 * 60 * 1000 * i), '{y}-{m}-{d}');\n        var contain = false;\n\n        var _iterator = (0, _createForOfIteratorHelper2.default)(data.lastTenVisitCount),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var o = _step.value;\n\n            if (o.login_date === time) {\n              contain = true;\n              tenVisitCount.push(o.count);\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        if (!contain) {\n          tenVisitCount.push(0);\n        }\n\n        var userContain = false;\n\n        var _iterator2 = (0, _createForOfIteratorHelper2.default)(data.lastTenUserVisitCount),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _o = _step2.value;\n\n            if (_o.login_date === time) {\n              userContain = true;\n              tenUserVisitCount.push(_o.count);\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        if (!userContain) {\n          tenUserVisitCount.push(0);\n        }\n\n        dateArr.push(time);\n      }\n\n      this.chart = _echarts.default.init(document.getElementById('visit-count-chart'));\n      this.chartOption.legend.data = [this.$t('common.you'), this.$t('common.total')];\n      this.chartOption.xAxis.data = dateArr;\n      this.chartOption.series.push({\n        name: this.$t('common.you'),\n        type: 'bar',\n        barWidth: '25%',\n        color: '#FD7270',\n        data: tenUserVisitCount\n      });\n      this.chartOption.series.push({\n        name: this.$t('common.total'),\n        type: 'bar',\n        barWidth: '25%',\n        color: '#5D7DF2',\n        data: tenVisitCount\n      });\n      this.chart.setOption(this.chartOption);\n    },\n    browserCount: function browserCount(data) {\n      if (!data) {\n        return;\n      }\n\n      var legend_data = [];\n      var series_data = [];\n      data.forEach(function (item) {\n        var browser = item.browser || '未知';\n        series_data.push({\n          value: item.count,\n          name: browser\n        });\n        legend_data.push(browser);\n      });\n      this.browserCountOption.series[0].data = series_data;\n      this.browserCountOption.legend.data = legend_data;\n      this.browserCountChart = _echarts.default.init(document.getElementById('browser-count-chart'), 'westeros');\n      this.browserCountChart.setOption(this.browserCountOption);\n    },\n    operatingSystemCount: function operatingSystemCount(data) {\n      if (!data) {\n        return;\n      }\n\n      var legend_data = [];\n      var series_data = [];\n      data.forEach(function (item) {\n        var browser = item.operating_system || '未知';\n        series_data.push({\n          value: item.count,\n          name: browser\n        });\n        legend_data.push(browser);\n      });\n      this.operatingSystemCountOption.series[0].data = series_data;\n      this.operatingSystemCountOption.legend.data = legend_data;\n      this.browserCountChart = _echarts.default.init(document.getElementById('operating-system-count-chart'), 'westeros');\n      this.browserCountChart.setOption(this.operatingSystemCountOption);\n    }\n  }\n};\nexports.default = _default;",null]}